{% extends "base.html" %}
{% block content %}

<h2 class="mb-4">All Orders</h2>

<div class="table-responsive">
<table class="table table-hover align-middle">
<thead class="table-dark">
<tr>
  <th>Order ID</th>
  <th>User</th>
  <th>Email</th>
  <th>Payment Mode</th>
  <th>Payment Status</th>
  <th>Amount</th>
  <th>Items</th>
</tr>
</thead>

<tbody>
{% for order in orders %}
<tr>

  <td><strong>{{ order.order_code }}</strong></td>

  <td>{{ order.user.name }}</td>
  <td>{{ order.user.email }}</td>

  <td>
    <span class="badge bg-info">
      {{ order.payment_mode }}
    </span>
  </td>

  <!-- ðŸ”¥ ADMIN PAYMENT STATUS DROPDOWN -->
  <td>
    <form method="POST"
          action="/admin/order/update-status/{{ order.id }}">
      <select name="payment_status"
              class="form-select form-select-sm"
              onchange="this.form.submit()">

        <option value="Pending"
          {% if order.payment_status == "Pending" %}selected{% endif %}>
          Pending
        </option>

        <option value="Paid"
          {% if order.payment_status == "Paid" %}selected{% endif %}>
          Paid
        </option>

      </select>
    </form>
  </td>

  <td><strong>â‚¹{{ order.total_amount }}</strong></td>

  <td>
    <ul class="small mb-0">
      {% for item in order.items %}
        <li>{{ item.product_name }} Ã— {{ item.quantity }}</li>
      {% endfor %}
    </ul>
  </td>

</tr>
{% endfor %}
</tbody>
</table>
</div>

{% endblock %}
